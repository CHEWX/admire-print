var items=[],page=0;angular.module("admirePrint",[]).controller("headerCtrl",function(e){e.backToTop=function(){$("body").animate({scrollTop:0},"slow")}}).controller("appCtrl",function(e){$(".app").dcPinterestFeed({id:"admireprint",tweetId:"admirespaces",results:100})}).controller("footerCtrl",function(e){e.more=function(){$(".app").append(items.slice(page+"1",page+1+"0")),page++}}),function(e){function t(e,t,a){var t=encodeURIComponent(t),e=encodeURIComponent(e),n='<a href="http://www.facebook.com/sharer.php?u='+t+"&t="+e+'" class="share-facebook fa icon-facebook"></a>';return n+='<a href="https://twitter.com/share?url='+t+"&text="+e+"&via="+a+'" class="share-twitter fa icon-twitter"></a>'}function a(e){var t,a=Math.round((+new Date-e)/1e3),r=new Array;r[0]=[31536e3,"year"],r[1]=[2592e3,"month"],r[2]=[604800,"week"],r[3]=[86400,"day"],r[4]=[3600,"hr"],r[5]=[60,"min"];var i=0,o=r.length;for(i=0;o>i&&(s=r[i][0],n=r[i][1],0==(xj=Math.floor(a/s)));i++);return t=1==xj?"1 "+n:xj+" "+n+"s",o>i+1&&(s2=r[i+1][0],n2=r[i+1][1],0!=(xj2=Math.floor((a-s*xj)/s2))&&(t+=1==xj2?" + 1 "+n2:" + "+xj2+" "+n2+"s")),t+=" ago"}PinterestFeedObject=function(e,t){this.create(e,t)},e.extend(PinterestFeedObject.prototype,{create:function(n,r){var s=e.extend(!0,this.defaults,r),i=s.id.split("/"),o=i.length>1?"/rss":"/feed.rss",c="http://www.pinterest.com/"+s.id,p="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+s.results+"&callback=?&q="+encodeURIComponent(c+o);jQuery.ajax({url:p,cache:!0,dataType:"jsonp",success:function(n){n=n.responseData.feed.entries,e.each(n,function(n,r){if(n<s.results){var i=r.publishedDate,o=e("img",r.content).attr("src"),o=o.replace("236x","736x"),c='<a href="'+r.link+'" target="_blank"><img src="'+o+'" alt="" /></a>',p='<article class="item">'+c+'<div class="item__text">'+r.contentSnippet;p+='<span class="section-share">'+t(r.contentSnippet,r.link,s.tweetId)+"</span>",i=""!=i?p+='<span class="date">'+a(new Date(i).getTime())+"</span></div></article>":""}items.push(p)}),e(".app .preloader").fadeOut(function(){var t=items.slice(0,10);e(".app").append(t).hide(),e(".app > *").hide(),e(".app").show(),e(".app .item").each(function(t){e(this).delay(250*t).fadeIn("250")})}),page++},complete:function(){e(n).click(function(t){if(e(this).parent().hasClass("section-share")){var a=e(this).attr("href");return window.open(a,"sharer","toolbar=0,status=0,width=626,height=436"),!1}external&&(this.target="_blank")})}})}}),e.fn.dcPinterestFeed=function(t,a){var n={};return this.each(function(){var r=e(this);n=r.data("pinterestfeed"),n||(n=new PinterestFeedObject(this,t,a),r.data("pinterestfeed",n))}),n}}(jQuery);